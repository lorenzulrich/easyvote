{namespace v=Tx_Vhs_ViewHelpers}
{namespace ev=Tx_Easyvote_ViewHelpers}

<div class="pull-left login-status">
	<f:security.ifAuthenticated>
		<f:then>
			<f:security.ifHasRole role="{settings.communityUserGroupUid}">
				<f:link.page pageUid="{settings.communityHomePid}">
					<f:if condition="{user.image}">
						<f:then>
							<f:image class="user-image" alt="{user.firstName} {user.lastName}" src="uploads/pics/{user.image}" width="50" height="50c"/>
						</f:then>
						<f:else>
							<img class="user-image-small" src="https://graph.facebook.com/{user.username}/picture?width=50&height=50" height="50" width="50" alt="{user.firstName} {user.lastName}">
						</f:else>
					</f:if>
				</f:link.page>
				<f:translate key="loginPanel.loggedInAs" />
				<div class="user-name"><f:link.page pageUid="{settings.communityHomePid}">{user.firstName} {user.lastName}</f:link.page></div>
			</f:security.ifHasRole>
		</f:then>
	</f:security.ifAuthenticated>
</div>
<div class="pull-right">
	<f:security.ifAuthenticated>
		<f:then>
			<f:security.ifHasRole role="{settings.communityUserGroupUid}">
				<f:link.page class="ui-button muted" pageUid="{settings.siteHomePid}" additionalParams="{logintype:'logout'}"><f:translate key="loginPanel.logout" /></f:link.page>
			</f:security.ifHasRole>
		</f:then>
		<f:else>
			<f:link.action extensionName="vifbauth" pluginName="Auth" pageUid="{settings.loginPid}" controller="Authentication" action="login">
				<f:image src="EXT:easyvote/Resources/Public/Images/button-facebook-login.png" alt="Log in with Facebook" />
			</f:link.action><br />
			<a class="hasModal" href="#"><f:translate key="loginPanel.register" /></a>
			<div class="hidden profile-popup">
				<a class="pull-right qtip-close" aria-label="schliessen">
					<i class="icon icon-remove"></i>
				</a>
				<f:render partial="CommunityUser/NoProfileModal" />
			</div>
		</f:else>
	</f:security.ifAuthenticated>
</div>