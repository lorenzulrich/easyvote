{namespace vi=Visol\Easyvote\ViewHelpers}
<f:if condition="{dataCompletionRequestNecessary}">
	<div class="hidden" id="dataCompletionRequestModal">
		<h2><f:translate key="editProfile.dataCompletionRequestModalHeader" /></h2>
		<f:form noCacheHash="true" enctype="multipart/form-data" pageUid="{settings.communityEditProfilePid}" pluginName="Profile" action="updateProfile" name="communityUser" object="{communityUser}">
			<div id="dataCompletionRequestModalContent">
				<div class="pull-left" id="dataCompletionRequestModalLeft">
					<f:if condition="{communityUser.citySelection}">
						<f:else>
							<div class="form-group">
								<label>{f:translate(key:'editProfile.placeholderCity')}</label>
								<f:form.textfield class="form-control communityUser-citySelection" property="citySelection" />
							</div>
							<script>
								var postalCodeServiceUrl = "{f:uri.action(controller: 'City', action:'listCitiesByPostalCode', pluginName: 'communityAjax', absolute: 'TRUE', noCacheHash: 'TRUE', pageType: 999, pageUid: settings.communityAjaxPid)}";
							</script>
						</f:else>
					</f:if>
					<f:if condition="{communityUser.birthdate}">
						<f:else>
							<div class="form-group">
								<label for="birthday">{f:translate(key:'editProfile.placeholderBirthdate')}</label>
								<f:form.textfield id="birthday" class="form-control" property="birthdate" value="{communityUser.birthdate -> f:format.date(format:'d.m.Y')}">
									<f:format.date format="d.m.Y">{communityUser.birthdate}</f:format.date>
								</f:form.textfield>
							</div>
						</f:else>
					</f:if>
				</div>
				<div class="pull-right" id="dataCompletionRequestModalRight">
					<f:security.ifHasRole role="{settings.communityEmailUserGroupUid}">
						<f:if condition="{communityUser.falImage}">
							<f:else>
								<div class="form-group">
									<label for="dataCompletionRequestModalFalImage">{f:translate(key:'editProfile.placeholderImage')}</label>
									<img class="dataCompletionRequestModalPreviewImage" src="/typo3conf/ext/easyvote/Resources/Public/Images/profilepicture-placeholder.png" />
									<vi:form.upload id="dataCompletionRequestModalFalImage" property="falImage" />
								</div>
							</f:else>
						</f:if>
					</f:security.ifHasRole>
				</div>
			</div>
			<div class="form-group">
				<button class="btn btn-primary" type="submit"><f:translate key="editProfile.save" /></button>
			</div>
		</f:form>
	</div>
</f:if>