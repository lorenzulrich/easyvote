{namespace v=Tx_Vhs_ViewHelpers}
{namespace ev=Tx_Easyvote_ViewHelpers}

<div class="community-plugins">
	<div class="csc-default box box-lightblue">
		<h2><f:translate key="editProfile.header" /></h2>
		<f:flashMessages renderMode="div" />
		<f:render partial="FormErrors" arguments="{for: ''}" />
		<form class="inputForm">
		<div class="form-row">
			<input type="text" readonly value="{user.firstName} {user.lastName}" />
		</div>
		</form>
		<f:form class="inputForm" action="updateProfile" name="communityUser" object="{user}">
			<div class="form-row">
				<f:form.textarea property="address" additionalAttributes="{placeholder:'{f:translate(key:\'editProfile.placeholderAddress\')}'}" />
			</div>
			<div class="form-row">
				<f:form.textfield class="formfield-zip" property="zip" additionalAttributes="{required: required, placeholder:'{f:translate(key:\'editProfile.placeholderZip\')}'}" />
				<f:form.textfield class="formfield-city" property="city" additionalAttributes="{required: required, placeholder:'{f:translate(key:\'editProfile.placeholderCity\')}'}" />
			</div>
			<div class="form-row">
				<ev:form.select property="kanton" options="{kantons}" optionValueField="uid" optionLabelField="name" additionalAttributes="{required: required}" prependOptionLabel="{f:translate(key:'editProfile.emptySelectKanton')}" prependOptionValue="0" />
			</div>
			<div class="form-row">
				<select name="tx_easyvote_profile[phoneNumberPrefix]" class="formfield-phoneNumberPrefix">
					<f:for each="{phoneNumberPrefixes}" as="phoneNumberPrefix" key="key">
						<option {f:if(condition:'{0: \'{user.prefixCode}\'} == {0:\'{key}\'}', then:'selected=selected')} value="{key}">{phoneNumberPrefix}</option>
					</f:for>
				</select>
				<f:form.textfield name="communityUser[telephone]" value="{user.telephoneWithoutPrefix}" class="formfield-phoneNumber" additionalAttributes="{placeholder:'{f:translate(key:\'editProfile.placeholderMobile\')}'}" />
			</div>
			<div class="form-row">
				<f:form.textfield property="email" additionalAttributes="{required: required, placeholder:'{f:translate(key:\'editProfile.placeholderEmail\')}'}" />
			</div>
			<div class="form-row">
				<f:form.textfield property="birthdate" additionalAttributes="{required: required, placeholder:'{f:translate(key:\'editProfile.placeholderBirthdate\')}'}" value="{user.birthdate -> f:format.date(format:'d.m.Y')}">
					<f:format.date format="d.m.Y">{user.birthdate}</f:format.date>
				</f:form.textfield>
			</div>
			<div class="form-row form-row-radio">
				<f:form.radio id="userLanguage-1" name="communityUser[userLanguage]" value="1" checked="{user.userLanguage} == 1" /> <label for="userLanguage-1">Deutsch</label>
				<f:form.radio id="userLanguage-2" name="communityUser[userLanguage]" value="2" checked="{user.userLanguage} == 2" /> <label for="userLanguage-2">Fran√ßais</label>
				<f:form.radio id="userLanguage-3" name="communityUser[userLanguage]" value="3" checked="{user.userLanguage} == 3" /> <label for="userLanguage-3">Italiano</label>
			</div>
			<div class="form-row form-row-radio">
				<f:form.radio id="gender-1" name="communityUser[gender]" value="1" checked="{user.gender} == 1" /> <label for="gender-1"><i class="icon icon-male"></i></label>
				<f:form.radio id="gender-2" name="communityUser[gender]" value="2" checked="{user.gender} == 2" /> <label for="gender-2"><i class="icon icon-female"></i></label>
			</div>
			<div class="form-row">
				<button type="submit"><f:translate key="editProfile.save" /></button>
			</div>
			<f:link.action controller="CommunityUser" action="removeProfile" arguments="{communityUser:user}" class="hasModal"><f:translate key="editProfile.remove" /></f:link.action>
			<div class="hidden">
				<div class="community-plugins">
					<p><f:translate key="editProfile.removeInformation" /></p>
					<button class="pull-left button-cancel"><f:translate key="editProfile.removeCancel" /></button>
					<button class="pull-right button-confirm"><f:translate key="editProfile.removeConfirm" /></button>
				</div>
			</div>
		</f:form>
	</div>
</div>